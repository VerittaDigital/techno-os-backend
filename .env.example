# Techno OS Backend — Environment Variables

# ============================================================================
# MANDATORY (required for startup)
# ============================================================================

# FastAPI host binding
VERITTA_HOST=0.0.0.0

# FastAPI port
VERITTA_PORT=8000

# API key for authentication (fail-closed if missing or invalid)
# Set to a long random secret in production (min 32 chars recommended)
VERITTA_BETA_API_KEY=CHANGE_ME_TO_A_LONG_RANDOM_SECRET

# Governance profiles fingerprint lock (P1.1 invariant)
# Generate with: python scripts/generate_profiles_fingerprint_lock.py
VERITTA_PROFILES_FINGERPRINT=e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855

# Admin API authentication
# Set to a long random secret in production (min 32 chars recommended)
VERITTA_ADMIN_API_KEY=CHANGE_ME_TO_A_LONG_RANDOM_SECRET

# Admin API rate limit (optional)
# Default: 100 requests per minute
# VERITTA_ADMIN_RATE_LIMIT_PER_MIN=100

# ============================================================================
# DATABASE (Session Persistence — TASK A1)
# ============================================================================

# Database URL
# Dev/Test: sqlite:///./app.db (SQLite, auto-created)
# Prod: postgresql://user:password@host:port/dbname
DATABASE_URL=sqlite:///./app.db

# Session TTL (hours)
# Default: 8 hours, absolute (no sliding window)
VERITTA_SESSION_TTL_HOURS=8

# Audit log file path (JSONL append-only)
# Recommended: /var/log/veritta/audit.log (Linux) or C:\logs\veritta\audit.log (Windows)
VERITTA_AUDIT_LOG_PATH=./audit.log

# ============================================================================
# PRIVACY & SECURITY (human-in-the-loop)
# ============================================================================

# Track request/response hashes in audit (set to 'false' for maximum privacy)
# Recommended: true (enables debugging and compliance)
VERITTA_AUDIT_DIGEST_ENABLED=true

# Maximum request payload size (bytes)
# Default: 8192 (8KB)
VERITTA_MAX_PAYLOAD_SIZE=8192

# Maximum action registry entries
# Default: 10000
VERITTA_MAX_REGISTRY_ENTRIES=10000

# ============================================================================
# EXECUTOR & PERFORMANCE
# ============================================================================

# Executor timeout (seconds) for async pipeline execution
# Default: 10.0 if not set
VERITTA_EXECUTOR_TIMEOUT_S=10.0

# ============================================================================
# LLM PROVIDER (if using agentic pipeline)
# ============================================================================

# Provider: 'openai' | 'anthropic' | 'ollama' | None (disabled)
LLM_PROVIDER=

# API key (keep secret; never commit)
LLM_API_KEY=

# Model ID
LLM_MODEL_ID=

# Max tokens for LLM response
LLM_MAX_TOKENS=2048

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================

# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Enable CORS for frontend (development only)
VERITTA_CORS_ORIGINS=http://localhost:3000

# Enable verbose audit logging (slows down production)
VERITTA_VERBOSE_AUDIT=false

# ============================================================================
# TESTING (smoke tests)
# ============================================================================

# Smoke test enabled (pytest)
VERITTA_SMOKE_TEST_ENABLED=true

# Smoke test event type (must exist in registry)
VERITTA_SMOKE_TEST_EVENT_TYPE=test_event

# Smoke test action name
VERITTA_SMOKE_TEST_ACTION=test_action

# ============================================================================
# NOTES
# ============================================================================

# - Rate limiter uses in-memory rolling window (no env config needed)
# - Session store TTL is absolute (4 hours, configured in code)
