2026-01-01 13:13:07 - ğŸš€ Iniciando CI Gate F9.5 - TECHNO OS BACKEND
2026-01-01 13:13:07 - BASE_URL: https://localhost
2026-01-01 13:13:07 - ARTIFACTS_DIR: artifacts/f9_5
2026-01-01 13:13:07 - REQUIRE_HEALTHCHECK: 1
2026-01-01 13:13:07 - CURL_INSECURE: 1
2026-01-01 13:13:07 - Timestamp: 20260101_131307
2026-01-01 13:13:07 - Log file: artifacts/f9_5/ci_gate_20260101_131307.log
2026-01-01 13:13:07 - ğŸ” Precheck: Conectividade https://localhost/health (timeout: 10s)
[0;32mâœ… Precheck OK[0m
2026-01-01 13:13:07 - ğŸ§ª Executando pytest...
........................................................................ [ 19%]
.........................s..s........................................... [ 38%]
.....................s.s..ss............................................ [ 57%]
........................................................................ [ 77%]
........................................................................ [ 96%]
..ss.s.s.s...s                                                           [100%]
=============================== warnings summary ===============================
tests/test_agentic_pipeline_tracing.py::TestAgenticPipelineSemanticInvariance::test_pipeline_result_identical_with_without_tracing
tests/test_agentic_pipeline_tracing.py::TestAgenticPipelineSemanticInvariance::test_pipeline_blocked_result_identical_with_without_tracing
tests/test_executor_tracing.py::TestExecutorSemanticInvariance::test_llm_executor_result_identical_with_without_tracing
tests/test_executor_tracing.py::TestExecutorSemanticInvariance::test_noop_executor_result_identical_with_without_tracing
  /mnt/d/Projects/techno-os-backend/app/tracing.py:59: DeprecationWarning: Call to deprecated method __init__. (Since v1.35, the Jaeger supports OTLP natively. Please use the OTLP exporter instead. Support for this exporter will end July 2023.) -- Deprecated since version 1.16.0.
    jaeger_exporter = JaegerExporter(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
SKIPPED [1] tests/test_agentic_pipeline_tracing.py:36: Tracing dependencies not available
SKIPPED [1] tests/test_agentic_pipeline_tracing.py:145: Tracing dependencies not available
SKIPPED [1] tests/test_executor_tracing.py:42: Tracing dependencies not available
SKIPPED [1] tests/test_executor_tracing.py:99: Tracing dependencies not available
SKIPPED [1] tests/test_executor_tracing.py:203: Tracing dependencies not available
SKIPPED [1] tests/test_executor_tracing.py:233: Tracing dependencies not available
SKIPPED [1] tests/test_tracing.py:25: Tracing dependencies not available
SKIPPED [1] tests/test_tracing.py:43: Tracing dependencies not available
SKIPPED [1] tests/test_tracing.py:70: Tracing dependencies not available
SKIPPED [1] tests/test_tracing.py:98: Tracing dependencies not available
SKIPPED [1] tests/test_tracing_integration.py:29: Tracing dependencies not available
SKIPPED [1] tests/test_tracing_integration.py:123: Tracing dependencies not available
362 passed, 12 skipped, 4 warnings in 10.20s
[0;32mâœ… Pytest OK[0m
2026-01-01 13:13:22 - ğŸ” Executando flake8 (crÃ­ticos)...
[0;32mâœ… Flake8 OK[0m
2026-01-01 13:13:25 - ğŸ” Executando mypy (baseline check)...
[0;32mâœ… Mypy OK (73 erros, baseline: 73)[0m
2026-01-01 13:13:38 - ğŸš€ Executando smoke HTTPS...
ğŸš€ Iniciando Smoke Tests HTTPS (BASE_URL: https://localhost)...
Precheck: Conectividade https://localhost/health
âœ… Precheck OK
Teste 1: /health via HTTPS
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100    15  100    15    0     0    617      0 --:--:-- --:--:-- --:--:--   625
{"status":"ok"}âœ… /health OK
Teste 2: Endpoint raiz sem auth
HTTP/2 401 
server: nginx/1.29.4
date: Thu, 01 Jan 2026 16:13:38 GMT
content-type: text/html
content-length: 179
www-authenticate: Basic realm="Techno OS API"
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff

âœ… Endpoint protegido (401/403 esperado)
Teste 3: Endpoint raiz com auth
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100    15  100    15    0     0    586      0 --:--:-- --:--:-- --:--:--   600
{"status":"ok"}âœ… Auth OK
Teste 4: Grafana HTTPS e login
âœ… Grafana requer login (redirect/401)
ğŸ‰ Smoke Tests HTTPS PASS (todos testes OK)
Logs salvos em: smoke_https_20260101_131338.log
[0;32mâœ… Smoke HTTPS OK[0m
2026-01-01 13:13:39 - ğŸ” Executando contract observabilidade...
ğŸ” Iniciando Contract Tests Observabilidade (BASE_URL: https://localhost)...
Precheck: Conectividade https://localhost/health
âœ… Precheck OK
Teste 1: Prometheus targets UP
âœ… Targets essenciais UP
Teste 2: Prometheus rules OK
âœ… Rules carregadas sem erro
Teste 3: Alerting rules presentes
âœ… Alerting rules presentes (5)
Teste 4: Grafana datasource
âœ… Grafana datasource acessÃ­vel (requer auth)
ğŸ‰ Contract Tests Observabilidade PASS
Logs salvos em: contract_obs_20260101_131339.log
[0;32mâœ… Contract Observabilidade OK[0m
2026-01-01 13:13:39 - ğŸ”’ Executando contract seguranÃ§a...
ğŸ”’ Iniciando Contract Tests SeguranÃ§a (BASE_URL: https://localhost)...
Precheck: Conectividade https://localhost/health
âœ… Precheck OK
Teste 1: HTTP redireciona para HTTPS
âœ… HTTP redireciona para HTTPS
Teste 2: Backend via proxy
âœ… Backend acessÃ­vel via proxy
Teste 3: /metrics acesso controlado
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  1906  100  1906    0     0  69183      0 --:--:-- --:--:-- --:--:-- 70592
âœ… /metrics acessÃ­vel via proxy
Teste 4: Endpoints sensÃ­veis protegidos
âœ… Endpoints protegidos (contrato F9.2)
ğŸ‰ Contract Tests SeguranÃ§a PASS
Logs salvos em: contract_sec_20260101_131339.log
[0;32mâœ… Contract SeguranÃ§a OK[0m
2026-01-01 13:13:39 - ğŸ‰ CI GATE F9.5 PASS - TODOS TESTES OK
2026-01-01 13:13:39 - Logs salvos em: artifacts/f9_5/ci_gate_20260101_131307.log
[0;32mğŸ‰ CI GATE F9.5 PASS[0m
